{"version":3,"sources":["satisfiesSemverSync.ts"],"sourcesContent":["import './polyfills.ts';\n\nimport path from 'path';\nimport envPathKey from 'env-path-key';\nimport semver from 'semver';\n\n// @ts-ignore\nimport constants from './constants.ts';\n// @ts-ignore\nimport existsSync from './existsSync.ts';\n\nconst processVersion = path.join(__dirname, 'workers', 'processVersion.js');\n\nexport type satisfiesSemverSyncOptions = {\n  env?: object;\n};\n\nlet functionExec = null; // break dependencies\nexport default function satisfiesSemverSync(versionString: string, options: satisfiesSemverSyncOptions = {}): string | null {\n  if (!functionExec) functionExec = require('function-exec-sync'); // break dependencies\n\n  const env = options.env ?? process.env;\n  const pathKey = envPathKey(env);\n  const envPaths = env[pathKey].split(path.delimiter);\n\n  for (let i = 0; i < envPaths.length; i++) {\n    const envPath = envPaths[i];\n    const execPath = path.join(envPath, constants.node);\n    if (!existsSync(execPath)) continue;\n    const version = functionExec({ execPath }, processVersion);\n    if (semver.satisfies(version, versionString)) return execPath;\n  }\n\n  return null;\n}\n"],"names":["satisfiesSemverSync","processVersion","path","join","__dirname","functionExec","versionString","options","require","env","process","pathKey","envPathKey","envPaths","split","delimiter","i","length","envPath","execPath","constants","node","existsSync","version","semver","satisfies"],"mappings":";;;;+BAkBA;;;eAAwBA;;;QAlBjB;2DAEU;iEACM;6DACJ;kEAGG;mEAEC;;;;;;AAEvB,IAAMC,iBAAiBC,aAAI,CAACC,IAAI,CAACC,WAAW,WAAW;AAMvD,IAAIC,eAAe,MAAM,qBAAqB;AAC/B,SAASL,oBAAoBM,aAAqB;QAAEC,UAAAA,iEAAsC,CAAC;IACxG,IAAI,CAACF,cAAcA,eAAeG,QAAQ,uBAAuB,qBAAqB;QAE1ED;IAAZ,IAAME,MAAMF,CAAAA,eAAAA,QAAQE,GAAG,cAAXF,0BAAAA,eAAeG,QAAQD,GAAG;IACtC,IAAME,UAAUC,IAAAA,mBAAU,EAACH;IAC3B,IAAMI,WAAWJ,GAAG,CAACE,QAAQ,CAACG,KAAK,CAACZ,aAAI,CAACa,SAAS;IAElD,IAAK,IAAIC,IAAI,GAAGA,IAAIH,SAASI,MAAM,EAAED,IAAK;QACxC,IAAME,UAAUL,QAAQ,CAACG,EAAE;QAC3B,IAAMG,WAAWjB,aAAI,CAACC,IAAI,CAACe,SAASE,oBAAS,CAACC,IAAI;QAClD,IAAI,CAACC,IAAAA,qBAAU,EAACH,WAAW;QAC3B,IAAMI,UAAUlB,aAAa;YAAEc,UAAAA;QAAS,GAAGlB;QAC3C,IAAIuB,eAAM,CAACC,SAAS,CAACF,SAASjB,gBAAgB,OAAOa;IACvD;IAEA,OAAO;AACT"}